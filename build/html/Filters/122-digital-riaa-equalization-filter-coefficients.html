

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Digital RIAA equalization filter coefficients &mdash; Musicdsp.org  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Direct Form II biquad" href="275-direct-form-ii-biquad.html" />
    <link rel="prev" title="Delphi Class implementation of the RBJ filters" href="225-delphi-class-implementation-of-the-rbj-filters.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Musicdsp.org
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Synthesis/index.html">Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Analysis/index.html">Analysis</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="257-1-pole-lpf-for-smooth-parameter-changes.html">1 pole LPF for smooth parameter changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="185-1-rc-and-c-filter.html">1-RC and C filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="72-18db-oct-resonant-3-pole-lpf-with-tanh-dist.html">18dB/oct resonant 3 pole LPF with tanh() dist</a></li>
<li class="toctree-l2"><a class="reference internal" href="85-1st-and-2nd-order-pink-noise-filters.html">1st and 2nd order pink noise filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="236-3-band-equaliser.html">3 Band Equaliser</a></li>
<li class="toctree-l2"><a class="reference internal" href="30-303-type-filter-with-saturation.html">303 type filter with saturation</a></li>
<li class="toctree-l2"><a class="reference internal" href="266-4th-order-linkwitz-riley-filters.html">4th order Linkwitz-Riley filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="31-all-pass-filters-a-good-explanation.html">All-Pass Filters, a good explanation</a></li>
<li class="toctree-l2"><a class="reference internal" href="181-another-4-pole-lowpass.html">Another 4-pole lowpass…</a></li>
<li class="toctree-l2"><a class="reference internal" href="235-bass-booster.html">Bass Booster</a></li>
<li class="toctree-l2"><a class="reference internal" href="64-biquad-c-code.html">Biquad C code</a></li>
<li class="toctree-l2"><a class="reference internal" href="276-biquad-butterworth-chebyshev-n-order-m-channel-optimized-filters.html">Biquad, Butterworth, Chebyshev N-order, M-channel  optimized filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="243-butterworth-optimized-c-class.html">Butterworth Optimized C++ Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="128-c-class-implementation-of-rbj-filters.html">C++ class implementation of RBJ Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="226-c-weighed-filter.html">C-Weighed Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="131-cascaded-resonant-lp-hp-filter.html">Cascaded resonant lp/hp filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="180-cool-sounding-lowpass-with-decibel-measured-resonance.html">Cool Sounding Lowpass With Decibel Measured Resonance</a></li>
<li class="toctree-l2"><a class="reference internal" href="135-dc-filter.html">DC filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="225-delphi-class-implementation-of-the-rbj-filters.html">Delphi Class implementation of the RBJ filters</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Digital RIAA equalization filter coefficients</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="275-direct-form-ii-biquad.html">Direct Form II biquad</a></li>
<li class="toctree-l2"><a class="reference internal" href="174-direct-form-ii.html">Direct form II</a></li>
<li class="toctree-l2"><a class="reference internal" href="214-fast-downsampling-with-antialiasing.html">Fast Downsampling With Antialiasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="110-formant-filter.html">Formant filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="179-frequency-warped-fir-lattice.html">Frequency warped FIR lattice</a></li>
<li class="toctree-l2"><a class="reference internal" href="195-hilbert-filter-coefficient-calculation.html">Hilbert Filter Coefficient Calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="231-hiqh-quality-2-decimators.html">Hiqh quality /2 decimators</a></li>
<li class="toctree-l2"><a class="reference internal" href="141-karlsen.html">Karlsen</a></li>
<li class="toctree-l2"><a class="reference internal" href="240-karlsen-fast-ladder.html">Karlsen Fast Ladder</a></li>
<li class="toctree-l2"><a class="reference internal" href="38-lp-and-hp-filter.html">LP and HP filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="229-lpf-24db-oct.html">LPF 24dB/Oct</a></li>
<li class="toctree-l2"><a class="reference internal" href="28-lowpass-filter-for-parameter-edge-filtering.html">Lowpass filter for parameter edge filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="270-mdct-and-imdct-based-on-fftw3.html">MDCT and IMDCT based on FFTW3</a></li>
<li class="toctree-l2"><a class="reference internal" href="196-moog-filter.html">Moog Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="24-moog-vcf.html">Moog VCF</a></li>
<li class="toctree-l2"><a class="reference internal" href="25-moog-vcf-variation-1.html">Moog VCF, variation 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="26-moog-vcf-variation-2.html">Moog VCF, variation 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="35-notch-filter.html">Notch filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="116-one-pole-lp-and-hp.html">One pole LP and HP</a></li>
<li class="toctree-l2"><a class="reference internal" href="237-one-pole-filter-lp-and-hp.html">One pole filter, LP and HP</a></li>
<li class="toctree-l2"><a class="reference internal" href="117-one-pole-one-zero-lp-hp.html">One pole, one zero LP/HP</a></li>
<li class="toctree-l2"><a class="reference internal" href="118-one-zero-lp-hp.html">One zero, LP/HP</a></li>
<li class="toctree-l2"><a class="reference internal" href="263-one-liner-iir-filters-1st-order.html">One-Liner IIR Filters (1st order)</a></li>
<li class="toctree-l2"><a class="reference internal" href="265-output-limiter-using-envelope-follower-in-c.html">Output Limiter using Envelope Follower in C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="130-peak-notch-filter.html">Peak/Notch filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="253-perfect-lp4-filter.html">Perfect LP4 filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="76-pink-noise-filter.html">Pink noise filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="251-plot-filter-analyze-filter-characteristics.html">Plot Filter (Analyze filter characteristics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="218-plotting-r-b-j-equalisers-in-excel.html">Plotting R B-J Equalisers in Excel</a></li>
<li class="toctree-l2"><a class="reference internal" href="39-polyphase-filters.html">Polyphase Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="223-polyphase-filters-delphi.html">Polyphase Filters (Delphi)</a></li>
<li class="toctree-l2"><a class="reference internal" href="247-poor-man-s-fiwiz.html">Poor Man’s FIWIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="34-prewarping.html">Prewarping</a></li>
<li class="toctree-l2"><a class="reference internal" href="197-rbj-audio-eq-cookbook.html">RBJ Audio-EQ-Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="198-rbj-audio-eq-cookbook.html">RBJ Audio-EQ-Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="209-remez-exchange-algorithm-parks-mcclellan.html">Remez Exchange Algorithm (Parks/McClellan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="208-remez-remez-parks-mcclellan.html">Remez Remez (Parks/McClellan)</a></li>
<li class="toctree-l2"><a class="reference internal" href="27-resonant-iir-lowpass-12db-oct.html">Resonant IIR lowpass (12dB/oct)</a></li>
<li class="toctree-l2"><a class="reference internal" href="29-resonant-filter.html">Resonant filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="33-resonant-low-pass-filter.html">Resonant low pass filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="176-reverb-filter-generator.html">Reverb Filter Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="267-simple-tilt-equalizer.html">Simple Tilt equalizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="259-simple-biquad-filter-from-apple-com.html">Simple biquad filter from apple.com</a></li>
<li class="toctree-l2"><a class="reference internal" href="258-spuc-s-open-source-filters.html">Spuc’s open source filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="142-state-variable-filter-chamberlin-version.html">State Variable Filter (Chamberlin version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="92-state-variable-filter-double-sampled-stable.html">State Variable Filter (Double Sampled, Stable)</a></li>
<li class="toctree-l2"><a class="reference internal" href="23-state-variable.html">State variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="145-stilson-s-moog-filter-code.html">Stilson’s Moog filter code</a></li>
<li class="toctree-l2"><a class="reference internal" href="65-time-domain-convolution-with-o-n-log2-3.html">Time domain convolution with O(n^log2(3))</a></li>
<li class="toctree-l2"><a class="reference internal" href="66-time-domain-convolution-with-o-n-log2-3.html">Time domain convolution with O(n^log2(3))</a></li>
<li class="toctree-l2"><a class="reference internal" href="232-type-lpf-24db-oct.html">Type : LPF 24dB/Oct</a></li>
<li class="toctree-l2"><a class="reference internal" href="32-various-biquad-filters.html">Various Biquad filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="194-windowed-sinc-fir-generator.html">Windowed Sinc FIR Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="37-zoelzer-biquad-filters.html">Zoelzer biquad filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Effects/index.html">Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Other/index.html">Other</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Musicdsp.org</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Filters</a> &raquo;</li>
        
      <li>Digital RIAA equalization filter coefficients</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Filters/122-digital-riaa-equalization-filter-coefficients.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="digital-riaa-equalization-filter-coefficients">
<h1>Digital RIAA equalization filter coefficients<a class="headerlink" href="#digital-riaa-equalization-filter-coefficients" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><strong>Author or source:</strong> Frederick Umminger</p></li>
<li><p><strong>Type:</strong> RIAA</p></li>
<li><p><strong>Created:</strong> 2002-10-14 16:33:34</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">notes</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Use at your own risk. Confirm correctness before using. Don&#39;t assume I didn&#39;t goof
something up.

-Frederick Umminger
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">code</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">The</span> <span class="s">&quot;turntable-input software&quot;</span> <span class="kr">thread</span> <span class="n">inspired</span> <span class="n">me</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">some</span> <span class="n">coefficients</span> <span class="k">for</span> <span class="n">a</span> <span class="n">digital</span> <span class="n">RIAA</span> <span class="n">equalization</span> <span class="n">filter</span><span class="p">.</span> <span class="n">These</span> <span class="n">coefficients</span> <span class="n">were</span> <span class="n">found</span> <span class="n">by</span> <span class="n">matching</span> <span class="n">the</span> <span class="n">magnitude</span> <span class="n">response</span> <span class="n">of</span> <span class="n">the</span> <span class="n">s</span><span class="o">-</span><span class="n">domain</span> <span class="n">transfer</span> <span class="n">function</span> <span class="k">using</span> <span class="n">some</span> <span class="n">proprietary</span> <span class="n">Matlab</span> <span class="n">scripts</span><span class="p">.</span> <span class="n">The</span> <span class="n">phase</span> <span class="n">response</span> <span class="n">may</span> <span class="n">or</span> <span class="n">may</span> <span class="n">not</span> <span class="n">be</span> <span class="n">totally</span> <span class="n">whacked</span><span class="p">.</span>

<span class="n">The</span> <span class="n">s</span><span class="o">-</span><span class="n">domain</span> <span class="n">transfer</span> <span class="n">function</span> <span class="n">is</span>

<span class="n">R3</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">R1</span><span class="o">*</span><span class="n">C1</span><span class="o">*</span><span class="n">s</span><span class="p">)(</span><span class="mi">1</span><span class="o">+</span><span class="n">R2</span><span class="o">*</span><span class="n">C2</span><span class="o">*</span><span class="n">s</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">R1</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">R2</span><span class="o">*</span><span class="n">C2</span><span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="n">R2</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">R1</span><span class="o">*</span><span class="n">C1</span><span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="o">+</span> <span class="n">R3</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">R1</span><span class="o">*</span><span class="n">C1</span><span class="o">*</span><span class="n">s</span><span class="p">)(</span><span class="mi">1</span><span class="o">+</span><span class="n">R2</span><span class="o">*</span><span class="n">C2</span><span class="o">*</span><span class="n">s</span><span class="p">))</span>

<span class="n">where</span>

<span class="n">R1</span> <span class="o">=</span> <span class="mf">883.3</span><span class="n">k</span>
<span class="n">R2</span> <span class="o">=</span> <span class="mi">75</span><span class="n">k</span>
<span class="n">R3</span> <span class="o">=</span> <span class="mi">604</span>
<span class="n">C1</span> <span class="o">=</span> <span class="mf">3.6</span><span class="n">n</span>
<span class="n">C2</span> <span class="o">=</span> <span class="mi">1</span><span class="n">n</span>

<span class="n">This</span> <span class="n">is</span> <span class="n">based</span> <span class="n">on</span> <span class="n">the</span> <span class="n">reference</span> <span class="n">circuit</span> <span class="n">found</span> <span class="n">in</span> <span class="nl">http</span><span class="p">:</span><span class="c1">//www.hagtech.com/pdf/riaa.pdf</span>

<span class="n">The</span> <span class="n">coefficients</span> <span class="n">of</span> <span class="n">the</span> <span class="n">digital</span> <span class="n">transfer</span> <span class="n">function</span> <span class="n">b</span><span class="p">(</span><span class="n">z</span><span class="o">^-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">(</span><span class="n">z</span><span class="o">^-</span><span class="mi">1</span><span class="p">)</span> <span class="n">in</span> <span class="n">descending</span> <span class="n">powers</span> <span class="n">of</span> <span class="n">z</span><span class="p">,</span> <span class="nl">are</span><span class="p">:</span>

<span class="mf">44.1</span><span class="n">kHz</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.02675918611906</span>  <span class="o">-</span><span class="mf">0.04592084787595</span>   <span class="mf">0.01921229297239</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1.00000000000000</span>  <span class="o">-</span><span class="mf">0.73845850035973</span>  <span class="o">-</span><span class="mf">0.17951755477430</span><span class="p">]</span>
<span class="n">error</span> <span class="o">+/-</span> <span class="mf">0.25</span><span class="n">dB</span>

<span class="mi">48</span><span class="n">kHz</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span>  <span class="mf">0.02675918611906</span>  <span class="o">-</span><span class="mf">0.04592084787595</span>   <span class="mf">0.01921229297239</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span>  <span class="mf">1.00000000000000</span>  <span class="o">-</span><span class="mf">0.73845850035973</span>  <span class="o">-</span><span class="mf">0.17951755477430</span><span class="p">]</span>
<span class="n">error</span> <span class="o">+/-</span> <span class="mf">0.15</span><span class="n">dB</span>

<span class="mf">88.2</span><span class="n">kHz</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span>  <span class="mf">0.04872204977233</span>  <span class="o">-</span><span class="mf">0.09076930609195</span>   <span class="mf">0.04202280710877</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">1.00000000000000</span>  <span class="o">-</span><span class="mf">0.85197860443215</span>  <span class="o">-</span><span class="mf">0.10921171201431</span><span class="p">]</span>
<span class="n">error</span> <span class="o">+/-</span> <span class="mf">0.01</span><span class="n">dB</span>


<span class="mi">96</span><span class="n">kHz</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.05265477122714</span>  <span class="o">-</span><span class="mf">0.09864197097385</span>   <span class="mf">0.04596474352090</span>  <span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">[</span>  <span class="mf">1.00000000000000</span>  <span class="o">-</span><span class="mf">0.85835597216218</span>  <span class="o">-</span><span class="mf">0.10600020417219</span> <span class="p">]</span>
<span class="n">error</span> <span class="o">+/-</span> <span class="mf">0.006</span><span class="n">dB</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-02-24 13:55:58</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;0691_ptj">moc<span>&#46;</span>liamtoh<span>&#64;</span>0691_ptj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Hmm... since I&#39;m having lack in knowledge of utilizing this type of &#39;data&#39; in programming, could someone be kind and give a short code example of its usage (@ some samplerate), lets say, using Basic/VB language (though, C-C++/Pascal-Delphi/Java goes as well)?


JT
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-01 13:20:51</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ku&#46;oc&#46;snosrapsdTUOEMEKAT&#37;&#52;&#48;psdcisum">ku<span>&#46;</span>oc<span>&#46;</span>snosrapsdTUOEMEKAT<span>&#64;</span>psdcisum</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>they are coefficients to plug into a std biquad. look through the filters section of musicdsp you&#39;ll find a load of examples of biquads (essentially two quadratic equations which are solved together to do the DSP stuff).

It&#39;s of the form
out = b0*in[0] + b1*in[-1] + b2*in[-2] - a1*out[-1] - a2*out[-2]

where in[0,-1,-2] are the current input and the previous 2; and out[-1,-2] are the last two outputs.

Generally the previous output coefficients are subtracted, but sometimes the signs are swapped, and they are added like the inputs.

some algorithms use a for ins and b for outs, others use them the other way around. Generally (but not always) there are 3 input and 2 output coeffs, so you can work out which is which.

HTH
DSP
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-02 03:31:08</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;erehwon&#37;&#52;&#48;ydobon">moc<span>&#46;</span>erehwon<span>&#64;</span>ydobon</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>I don&#39;t get it. How do you set the frequency, Kenneth?

What frequencies are being passed?
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-03 09:09:29</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;0691_ptj">moc<span>&#46;</span>liamtoh<span>&#64;</span>0691_ptj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Hmm...

Since no links allowed here, I have started a topic on this matter @ KVR

topic number: 170235
topic name: &quot;Coefficients of the digital transfer function ... How to ?&quot;

I tried the 44.1/48kHz version and it produced quite &#39;bad&#39; results .. lots of rattle in audio and the RIAA curve form is not as it should be (should be: 20Hz; ±19.27dB ... ~1kHz; ±0dB ... 20kHz; ±19.62dB). (couple of pictures linked in KVR topic).

Also, .. if this is the result in anyway, this is the &#39;production curve&#39; used in mastering process ... how can it be changed to &#39;opposite&#39; ...

JT
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-04 22:52:32</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;0691_ptj">moc<span>&#46;</span>liamtoh<span>&#64;</span>0691_ptj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Thanks to all so far.

I found this quote from another forum:

QUOTE:
&quot;All you should need to do to get the complementary curve is swap the a and b
vectors, and then multiply both vectors by 1/a(0) to normalize. That will
give the coefficients for the inverse filter.&quot;.
/QUOTE

w/ a note that it was taken from one of those OPs (Frederick Umminger&#39;s) postings ... but the reference link was dead so I couldn&#39;t read the whole story. If OP or anyone else can give some light in this matter of how to make that swap w/ normalization (fully) so I could try w/ higher SR data. I did try and got values like -20.1287341287123, etc..

I actually got the 44.1/48kHz curve managed w/ help from a post in another forum. But there were nothing explained fully.

QUOTE:
&quot;
; Filter coefficients (48kHz) for RIAA curve from Frederick
; Umminger; see
;
;  b = [  0.02675918611906  -0.04592084787595   0.01921229297239]
;  a = [  1.00000000000000  -0.73845850035973  -0.17951755477430]
;  error +/- 0.15dB

; inverted filter for phono playback (48kHz):
;
;  b = [ 0.2275882473429072 -0.1680644758323426 -0.0408560856583673 ]
;  a = [ 1.0000000000000000 -1.7160778983199925  0.7179700042784745 ]
;
; since a[1] is too large, it must be splitted into a11 and a12

static b0=0.2275882473429072, b1=-0.1680644758323426, b2=-0.0408560856583673
static a1=.85803894915999625, a2=-0.7179700042784745
&quot;
/QUOTE

just lots of numbers ....

JT
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-15 00:41:09</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;0691_ptj">moc<span>&#46;</span>liamtoh<span>&#64;</span>0691_ptj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This seem to become a monologue but, ... I&#39;m still having issues w/ those 88.2kHz and 96kHz filter coefficients when inverted.

Noticed that when those coefficients for 88.2kHz and 96kHz are inverted, in both cases, a1 and a2 gets values which maybe are not good in equation

y[i] = b0x[i] + b1x[i-1] + b2x[i-2] - a1y[i-1] - a2y[i-1]

because of, a1 gets a negative value and its decimal part is bigger than a2 is --&gt; &quot; --a1y[i-1] - a2y[i-2]&quot; --&gt; looks like y[i] starts growing after every sample calculation. This is not an issue w/ data for 44.1kHz and 48kHz. When I change those a1/a2 decimal parts so that the abs(a1)-a2 =&lt; 1 becomes true then filter works well (though not right recults). Also, while analyzing the VST plugin, using C.W.Buddes VST PluginAnalyzer, Delphi tracer (Watch) shows y[i] become over 1.0 after ~830 sampleframes and after 8192 sampleframes, y[i] has value of 2.488847401e+11 already (i.e. 248884740100). This shouldn&#39;t be a coding problem since a friend of mine tested these w/ SynthMaker (no coding needed) and the results were equal.

If this &quot;-a1x[i-1]-a2x[i-2] &gt; 1&quot; is an issue, are there any methods to get it fixed w/o loosing the accuracy OP got into those original coefficients?

jtp
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-15 22:41:37</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ed&#46;luosfosruoivas&#37;&#52;&#48;naitsirhC">ed<span>&#46;</span>luosfosruoivas<span>&#64;</span>naitsirhC</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Try to plot the poles and zeroes. If there are poles outside the unit circle, your filter will be unstable!
To eliminate poles outside the unit circle, construct an allpass filter which has zeroes at the same position as the unwanted poles. They are now canceling out themself, so that you only have poles inside the unit circle. Your filter should be stable now!

All you need to know now is how to transform the filter coefficients into poles and zeroes and vice versa. If you&#39;re using delphi, you might want to have a look into the DFilter class of the open source project &#39;Delphi ASIO &amp; VST Packages&#39;.
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-03-24 11:53:25</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;0691_ptj">moc<span>&#46;</span>liamtoh<span>&#64;</span>0691_ptj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Thanks for your suggestion Christian.
I didn&#39;t try this allpass method because of

- I managed to get this issue rounded through another way (I have now 3rd-4th order filters working here as VST and standalone for all those four samplerates mentioned here and I&#39;m also considering to add ones for 174.6 kHz and 192 kHz as well)

- as I&#39;m learning these filter matters and delphi programming, I would have needed some good examples to do this


My final thoughts over those coefficients listed in F. Ummingers post:

As those coefficients needs to be inversed before getting the RIAA reproduction done, I can&#39;t say 100% sure if any of those works properly then (maybe one set does).
When inversion is done as was suggested elsewhere:
- swap a/b vectors,
- multiply all with 1/a0 and
- optional: &#39;normalize&#39; b&#39;s by dividing every b with sum of b&#39;s
, only coefficients for 44.1kHz and 48kHz seem to become stable but, which one is the right one then since, those original coefficients are same for both? I suppose those can&#39;t be equal coefficients because this is sample accurate filter in question, or can those?. If not then, which one is the correct one ... you can find it out by trying (least the resulting sound quality should tell this). Maybe Hannes Rohde (quote in my 3rd post) went through this and found the right ones or just used those given for 48kHz (SoundBlaster DSP is internally 48kHz).

What&#39;s wrong with those others? It seems that both, 88.2kHz and 96kHz coefficients as inversed, produces unstable filter which won&#39;t work (see my previous post)

jtp
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2007-04-22 12:03:52</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;0691_ptj">moc<span>&#46;</span>liamtoh<span>&#64;</span>0691_ptj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>FYI, here are working filter coefficients for biquad implementation of RIAA EQ Reproduction filters:

44.1kHz:
a = [ 1.0000000000 -1.7007240000  0.7029381524 ]
b = [ 1.0000000000 -0.7218922000 -0.1860520545 ]
error ~0.23dB

48kHz:
a = [ 1.0000000000 -1.7327655000  0.7345534436 ]
b = [ 1.0000000000 -0.7555521000 -0.1646257113 ]
error ~0.14dB

88.2kHz:
a = [ 1.0000000000 -1.8554648000  0.8559721393 ]
b = [ 1.0000000000 -0.8479577000 -0.1127631993 ]
error 0.008dB

and 96kHz:
a = [ 1.0000000000 -1.8666083000  0.8670382873 ]
b = [ 1.0000000000 -0.8535331000 -0.1104595113 ]
error ~0.006dB


NOTES:

# - By swapping the a1&lt;-&gt;b1 and a2&lt;-&gt;b2 you&#39;ll get the production filter.

# - All these given filter coefficients produces a bit gained filter (~+12.5dB or so) so, if you like to adjust the 1 kHz = 0dB, it can be done quite accurately by finding linear difference using software like Tobybear&#39;s FilterExplorer. Enter coefficients into FilterExplorer, by moving mouse cursor over the plotted magnitude curve in magnitude plot window, find/point the ~1kHz position and then check the magnitude value (value inside the brackets) found in info field. Use this value as divider for b coefficients.


jtp
jiiteepee@yahoo.se
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2009-08-07 18:43:49</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ude&#46;nretsewhtron&#46;ece&#37;&#52;&#48;ztub">ude<span>&#46;</span>nretsewhtron<span>&#46;</span>ece<span>&#64;</span>ztub</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>The amplitude response of Umminger&#39;s Fs = 48 kHz filter gives an excellent approximation to the RIAA amplitude response curve but Umminger suggests the phase response may be &quot;totally whacked&quot;. Actually, the phase response is pretty good, provided &quot;phase response&quot; is interpreted properly.
Umminger&#39;s filters are carelessly presented. The 44.1 kHz version is not there at all, and the 88.2 kHz and 96 kHz cases have reproduction filter poles &gt; 1 that should be replaced by their reciprocals. For that reason I shall use the coefficients given by jtp, though the general approach is Umminger&#39;s.
When computing phase of the digital filter, a linear phase term may be added to the computation as convenient, as such a term corresponds to time shift. That is, two phase responses are for our practical purposes equivalent if they differ only by a phase linear in frequency f. The RIAA analog filter has an asymptotic phase of –90 deg and Umminger&#39;s asymptotic (Fs/2) phase is 0, so one may conjecture that a term 2Df/Fs ought to be added to the computation of the digital filter phase, where D = -90. Actually, there is no reason to restrict D to multiples of 90.
In jtp&#39;s Fs=44.1 kHz case, an adjustment to the computed phase using D = -65.5 results in maximum computed phase error &lt; 1.5 deg over the range 30 Hz – 10 kHz, while the computation using D = -75.75 results in maximum computed phase error &lt; 5.2 deg over the range 30 Hz – 20 kHz. Of course the digital filter itself is independent of D, which is used only to interpret the phase response. One is, in effect, comparing the output of the digital filter with the output of the RIAA analog filter delayed by D/180 sample intervals. The digital filter itself remains as given by jtp.
In jtp&#39;s Fs=48 kHz case use D = -68 for a phase error &lt; 1.2 deg  over the range 30 Hz – 10 kHz, and D = -75 for a phase error &lt; 3.8 deg over the range 30 Hz – 20 kHz.
In jtp&#39;s Fs=88.2 kHz case use D = -72 for a phase error &lt; 0.31 deg  over the range 30 Hz – 10 kHz, and D = -72.8 for a phase error &lt; 0.5 deg over the range 30 Hz – 20 kHz.
In jtp&#39;s Fs=96 kHz case use D = -72.4 for a phase error &lt; 0.30 deg  over the range 30 Hz – 10 kHz, and D = -72.8 for a phase error &lt; 0.375 deg over the range 30 Hz – 20 kHz.
In the Fs = 44.1 or 48 kHz cases, if a max phase error, over 30 Hz – 20 kHz, of about 0.5 deg is wanted, then one can double the sample rate in the usual way using a linear phase FIR interpolating filter, then do equalization at sample rate 88.2 or 96 kHz, decimating the output by a factor 2. August 7, 2009
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="275-direct-form-ii-biquad.html" class="btn btn-neutral float-right" title="Direct Form II biquad" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="225-delphi-class-implementation-of-the-rbj-filters.html" class="btn btn-neutral float-left" title="Delphi Class implementation of the RBJ filters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Too many to list

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>