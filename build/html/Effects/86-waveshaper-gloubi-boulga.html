

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Waveshaper :: Gloubi-boulga &mdash; Musicdsp.org  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Other" href="../Other/index.html" />
    <link rel="prev" title="Waveshaper (simple description)" href="114-waveshaper-simple-description.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Musicdsp.org
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Synthesis/index.html">Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Analysis/index.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filters/index.html">Filters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Effects</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="89-2-wave-shaping-things.html">2 Wave shaping things</a></li>
<li class="toctree-l2"><a class="reference internal" href="70-alien-wah.html">Alien Wah</a></li>
<li class="toctree-l2"><a class="reference internal" href="221-band-limited-pwm-generator.html">Band Limited PWM Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="96-bit-quantization-reduction-effect.html">Bit quantization/reduction effect</a></li>
<li class="toctree-l2"><a class="reference internal" href="98-class-for-waveguide-delay-effects.html">Class for waveguide/delay effects</a></li>
<li class="toctree-l2"><a class="reference internal" href="169-compressor.html">Compressor</a></li>
<li class="toctree-l2"><a class="reference internal" href="124-decimator.html">Decimator</a></li>
<li class="toctree-l2"><a class="reference internal" href="44-delay-time-calculation-for-reverberation.html">Delay time calculation for reverberation</a></li>
<li class="toctree-l2"><a class="reference internal" href="207-dynamic-convolution.html">Dynamic convolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="102-ece320-project-reverberation-w-parameter-control-from-pc.html">ECE320 project: Reverberation w/ parameter control from PC</a></li>
<li class="toctree-l2"><a class="reference internal" href="74-early-echo-s-with-image-mirror-technique.html">Early echo’s with image-mirror technique</a></li>
<li class="toctree-l2"><a class="reference internal" href="203-fold-back-distortion.html">Fold back distortion</a></li>
<li class="toctree-l2"><a class="reference internal" href="47-guitar-feedback.html">Guitar feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="139-lo-fi-crusher.html">Lo-Fi Crusher</a></li>
<li class="toctree-l2"><a class="reference internal" href="274-lookahead-limiter.html">Lookahead Limiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="154-most-simple-and-smooth-feedback-delay.html">Most simple and smooth feedback delay</a></li>
<li class="toctree-l2"><a class="reference internal" href="153-most-simple-static-delay.html">Most simple static delay</a></li>
<li class="toctree-l2"><a class="reference internal" href="101-parallel-combs-delay-calculation.html">Parallel combs delay calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="78-phaser-code.html">Phaser code</a></li>
<li class="toctree-l2"><a class="reference internal" href="230-polynominal-waveshaper.html">Polynominal Waveshaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="150-reverberation-algorithms-in-matlab.html">Reverberation Algorithms in Matlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="45-reverberation-techniques.html">Reverberation techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="204-simple-compressor-class-c.html">Simple Compressor class (C++)</a></li>
<li class="toctree-l2"><a class="reference internal" href="42-soft-saturation.html">Soft saturation</a></li>
<li class="toctree-l2"><a class="reference internal" href="173-stereo-enhancer.html">Stereo Enhancer</a></li>
<li class="toctree-l2"><a class="reference internal" href="255-stereo-field-rotation-via-transformation-matrix.html">Stereo Field Rotation Via Transformation Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="256-stereo-width-control-obtained-via-transfromation-matrix.html">Stereo Width Control (Obtained Via Transfromation Matrix)</a></li>
<li class="toctree-l2"><a class="reference internal" href="126-time-compression-expansion-using-standard-phase-vocoder.html">Time compression-expansion using standard phase vocoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="177-transistor-differential-amplifier-simulation.html">Transistor differential amplifier simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="277-univox-univibe-emulator.html">UniVox Univibe Emulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="104-variable-hardness-clipping-function.html">Variable-hardness clipping function</a></li>
<li class="toctree-l2"><a class="reference internal" href="41-waveshaper.html">WaveShaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="43-waveshaper.html">Waveshaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="46-waveshaper.html">Waveshaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="114-waveshaper-simple-description.html">Waveshaper (simple description)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Waveshaper :: Gloubi-boulga</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Other/index.html">Other</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Musicdsp.org</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Effects</a> &raquo;</li>
        
      <li>Waveshaper :: Gloubi-boulga</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Effects/86-waveshaper-gloubi-boulga.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="waveshaper-gloubi-boulga">
<h1>Waveshaper :: Gloubi-boulga<a class="headerlink" href="#waveshaper-gloubi-boulga" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><strong>Author or source:</strong> Laurent de Soras on IRC</p></li>
<li><p><strong>Created:</strong> 2002-03-17 15:40:13</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">notes</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Multiply input by gain before processing
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">code</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">double</span> <span class="n">x</span> <span class="o">=</span> <span class="n">input</span> <span class="o">*</span> <span class="mf">0.686306</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">exp</span> <span class="p">(</span><span class="n">sqrt</span> <span class="p">(</span><span class="n">fabs</span> <span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">*</span> <span class="o">-</span><span class="mf">0.75</span><span class="p">);</span>
<span class="n">output</span> <span class="o">=</span> <span class="p">(</span><span class="n">exp</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">exp</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span> <span class="o">*</span> <span class="n">a</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="n">exp</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">exp</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">));</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Date</strong>: 2004-09-25 21:42:39</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ten&#46;etelirt&#37;&#52;&#48;gnihtliam">ten<span>&#46;</span>etelirt<span>&#64;</span>gnihtliam</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>you can use a taylor series approximation for the exp , save time by realizing that
exp(-x) = 1/exp(x), use newton&#39;s method to calculate the sqrt with less precision...
and if you use SIMD instructions, you can calculate several values in parallel. dunno
what the savings would be like, but it would surely be faster.
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-05-25 22:32:21</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ed&#46;luosfosruoivas&#37;&#52;&#48;naitsirhC">ed<span>&#46;</span>luosfosruoivas<span>&#64;</span>naitsirhC</a></p></li>
</ul>
<div class="highlight-delphi notranslate"><div class="highlight"><pre><span></span><span class="c1">// Maybe something like this:</span>

<span class="k">function</span> <span class="nf">GloubiBoulga</span><span class="p">(</span><span class="n">x</span><span class="o">:</span><span class="kt">Single</span><span class="p">)</span><span class="o">:</span><span class="kt">Single</span><span class="o">;</span>
<span class="k">var</span> <span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">:</span><span class="kt">Single</span><span class="o">;</span>
<span class="k">begin</span>
 <span class="n">x</span><span class="o">:=</span><span class="n">x</span><span class="o">*</span><span class="mf">0.686306</span><span class="o">;</span>
 <span class="n">a</span><span class="o">:=</span><span class="mi">1</span><span class="o">+</span><span class="nb">exp</span><span class="p">(</span><span class="nb">sqrt</span><span class="p">(</span><span class="n">f_abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">*-</span><span class="mf">0.75</span><span class="p">)</span><span class="o">;</span>
 <span class="n">b</span><span class="o">:=</span><span class="nb">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">;</span>
 <span class="bp">Result</span><span class="o">:=</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="nb">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">))</span><span class="o">*</span><span class="n">b</span><span class="o">/</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="n">still</span> <span class="n">expensive</span><span class="o">,</span> <span class="n">but</span><span class="o">...</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-05-28 00:49:48</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ed&#46;luosfosruoivas&#37;&#52;&#48;naitsirhC">ed<span>&#46;</span>luosfosruoivas<span>&#64;</span>naitsirhC</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>A Taylor series doesn&#39;t work very well, because the approximation effects the result very early due to
a) numerical critical additions &amp; subtractions of approximations
b) approximating approximated &quot;a&quot; makes the result evene more worse.

The above version has already been improved, by removing 2 of 5 exp() functions.

You can also try to express the exp(x)+exp(-x) as cosh(x) with its approximation. So:

b:=exp(x);
Result:=(b-exp(-x*a))*b/(b*b+1);

would be:

Result:=(exp(x)-exp(-x*a))*20160/40320+x*x*(20160+ x*x*(1680+x*x*(56+x*x)));

but this is again more worse. Anyone else?
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-09-13 09:55:55</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:llun&#46;ved&#37;&#52;&#48;regguHwodahS">llun<span>&#46;</span>ved<span>&#64;</span>regguHwodahS</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Use table lookup with interpolation.
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-09-22 01:07:58</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ten&#46;baltg&#37;&#52;&#48;liced">ten<span>&#46;</span>baltg<span>&#64;</span>liced</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>IMHO, you can use
x - 0.15 * x^2 - 0.15 * x^3
instead of this scary formula.

I try to explain my position with this small graph:
http://liteprint.com/download/replacment.png

This is only first step, if you want to get more correct result you can use interpolation
method called method of minimal squares (this is translation from russian, maybe in england
it has another name)
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-09-22 07:19:07</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ku&#46;oc&#46;snosrapsd&#37;&#52;&#48;psdcisum">ku<span>&#46;</span>oc<span>&#46;</span>snosrapsd<span>&#64;</span>psdcisum</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>That&#39;s much better decil - thx for that!

DSP
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-09-22 11:05:07</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ten&#46;baltg&#37;&#52;&#48;liced">ten<span>&#46;</span>baltg<span>&#64;</span>liced</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>You are welcome :)

Now I&#39;ve working under plugin with wapeshapping processing like this. I&#39;ve put a link to it
here, when I&#39;ve done it.
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-09-24 01:15:38</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ten&#46;baltg&#37;&#52;&#48;liced">ten<span>&#46;</span>baltg<span>&#64;</span>liced</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>You can check my version:
http://liteprint.com/download/SweetyVST.zip

Please, send comments and suggestions to my email.

Dmitry.
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-10-27 09:57:44</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:moc&#46;liamtoh&#37;&#52;&#48;12_namyaj">moc<span>&#46;</span>liamtoh<span>&#64;</span>12_namyaj</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Which formula exactly did you use decil, for your plugin? How do you get different harmonics
from this algo. thanx

jay
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Date</strong>: 2005-11-15 09:09:48</p></li>
<li><p><strong>By</strong>: <a class="reference external" href="mailto:ten&#46;etelirt&#37;&#52;&#48;liam">ten<span>&#46;</span>etelirt<span>&#64;</span>liam</a></p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>wow, blast from the past seeing this turn up on kvraudio.

christian - i&#39;d have thought that an advantage of using a taylor series approximation would be
that it limits the order of the polynomial (and the resulting bandwidth) somewhat.  it&#39;s been ages
since i tested, but i thought i got some reasonable sounding results using the taylor series
approximation.  maybe not.

decil - isn&#39;t that a completely unrelated polynomial (similar to the common and cheap x - a x^3 ?).
i&#39;d think you&#39;d have to do something about the dc from the x^2 term, too (or do a sign(x)*x^2).
anyway, your plugin sounds to be popular so i look forward to checking it out later at home.
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Other/index.html" class="btn btn-neutral float-right" title="Other" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="114-waveshaper-simple-description.html" class="btn btn-neutral float-left" title="Waveshaper (simple description)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Too many to list

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>