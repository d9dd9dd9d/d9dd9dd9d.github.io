

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>C# Oscilator class &mdash; Musicdsp.org  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="C++ gaussian noise generation" href="168-c-gaussian-noise-generation.html" />
    <link rel="prev" title="Butterworth" href="227-butterworth.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Musicdsp.org
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Synthesis</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="16-allmost-ready-to-use-oscillators.html">(Allmost) Ready-to-use oscillators</a></li>
<li class="toctree-l2"><a class="reference internal" href="224-am-formantic-synthesis.html">AM Formantic Synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="1-alias-free-waveform-generation-with-analog-filtering.html">Alias-free waveform generation with analog filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="152-another-lfo-class.html">Another LFO class</a></li>
<li class="toctree-l2"><a class="reference internal" href="167-another-cheap-sinusoidal-lfo.html">Another cheap sinusoidal LFO</a></li>
<li class="toctree-l2"><a class="reference internal" href="219-antialiased-square-generator.html">Antialiased square generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="134-arbitary-shaped-band-limited-waveform-generation-using-oversampling-and-low-pass-filtering.html">Arbitary shaped band-limited waveform generation (using oversampling and low-pass filtering)</a></li>
<li class="toctree-l2"><a class="reference internal" href="123-audiable-alias-free-waveform-gen-using-width-sine.html">Audiable alias free waveform gen using width sine</a></li>
<li class="toctree-l2"><a class="reference internal" href="268-band-limited-waveforms-my-way.html">Band Limited waveforms my way</a></li>
<li class="toctree-l2"><a class="reference internal" href="90-bandlimited-sawtooth-synthesis.html">Bandlimited sawtooth synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="17-bandlimited-waveform-generation.html">Bandlimited waveform generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="75-bandlimited-waveforms-synopsis.html">Bandlimited waveforms synopsis.</a></li>
<li class="toctree-l2"><a class="reference internal" href="12-bandlimited-waveforms.html">Bandlimited waveforms…</a></li>
<li class="toctree-l2"><a class="reference internal" href="227-butterworth.html">Butterworth</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">C# Oscilator class</a></li>
<li class="toctree-l2"><a class="reference internal" href="168-c-gaussian-noise-generation.html">C++ gaussian noise generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="187-chebyshev-waveshaper-using-their-recursive-definition.html">Chebyshev waveshaper (using their recursive definition)</a></li>
<li class="toctree-l2"><a class="reference internal" href="15-cubic-polynomial-envelopes.html">Cubic polynomial envelopes</a></li>
<li class="toctree-l2"><a class="reference internal" href="140-dsf-super-set-of-blit.html">DSF (super-set of BLIT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="244-direct-pink-noise-synthesis-with-auto-correlated-generator.html">Direct pink noise synthesis with auto-correlated generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="68-discrete-summation-formula-dsf.html">Discrete Summation Formula (DSF)</a></li>
<li class="toctree-l2"><a class="reference internal" href="183-drift-generator.html">Drift generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="217-easy-noise-generation.html">Easy noise generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="189-fast-exponential-envelope-generator.html">Fast Exponential Envelope Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="151-fast-lfo-in-delphi.html">Fast LFO in Delphi…</a></li>
<li class="toctree-l2"><a class="reference internal" href="261-fast-sin-approximation-for-usage-in-e-g-additive-synthesizers.html">Fast SIN approximation for usage in e.g. additive synthesizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="216-fast-whitenoise-generator.html">Fast Whitenoise Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="10-fast-sine-and-cosine-calculation.html">Fast sine and cosine calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="9-fast-sine-wave-calculation.html">Fast sine wave calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="69-fast-square-wave-generator.html">Fast square wave generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="113-gaussian-white-noise.html">Gaussian White Noise</a></li>
<li class="toctree-l2"><a class="reference internal" href="109-gaussian-white-noise.html">Gaussian White noise</a></li>
<li class="toctree-l2"><a class="reference internal" href="215-generator.html">Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="14-inverted-parabolic-envelope.html">Inverted parabolic envelope</a></li>
<li class="toctree-l2"><a class="reference internal" href="211-matlab-octave-code-for-minblep-table-generation.html">Matlab/octave code for minblep table generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="213-padsynth-synthesys-method.html">PADsynth synthesys method</a></li>
<li class="toctree-l2"><a class="reference internal" href="271-prng-for-non-uniformly-distributed-values-from-trigonometric-identity.html">PRNG for non-uniformly distributed values from trigonometric identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="254-parabolic-shaper.html">Parabolic shaper</a></li>
<li class="toctree-l2"><a class="reference internal" href="111-phase-modulation-vs-frequency-modulation.html">Phase modulation Vs. Frequency modulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="160-phase-modulation-vs-frequency-modulation-ii.html">Phase modulation Vs. Frequency modulation II</a></li>
<li class="toctree-l2"><a class="reference internal" href="59-pseudo-random-generator.html">Pseudo-Random generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="242-pulsequad.html">PulseQuad</a></li>
<li class="toctree-l2"><a class="reference internal" href="8-pulsewidth-modulation.html">Pulsewidth modulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="241-quick-dirty-sine.html">Quick &amp; Dirty Sine</a></li>
<li class="toctree-l2"><a class="reference internal" href="161-quick-and-dirty-sine-generator.html">Quick and dirty sine generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="199-rbj-wavetable-101.html">RBJ Wavetable 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="272-randja-compressor.html">Randja compressor</a></li>
<li class="toctree-l2"><a class="reference internal" href="184-rossler-and-lorenz-oscillators.html">Rossler and Lorenz Oscillators</a></li>
<li class="toctree-l2"><a class="reference internal" href="67-sawsin.html">SawSin</a></li>
<li class="toctree-l2"><a class="reference internal" href="262-simple-time-stretching-granular-synthesizer.html">Simple Time Stretching-Granular Synthesizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="13-sine-calculation.html">Sine calculation</a></li>
<li class="toctree-l2"><a class="reference internal" href="269-smooth-random-lfo-generator.html">Smooth random LFO Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="2-square-waves.html">Square Waves</a></li>
<li class="toctree-l2"><a class="reference internal" href="220-trammell-pink-noise-c-class.html">Trammell Pink Noise (C++ class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="112-waveform-generator-using-minbleps.html">Waveform generator using MinBLEPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="80-wavetable-synthesis.html">Wavetable Synthesis</a></li>
<li class="toctree-l2"><a class="reference internal" href="11-weird-synthesis.html">Weird synthesis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Analysis/index.html">Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Filters/index.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Effects/index.html">Effects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Other/index.html">Other</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Musicdsp.org</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Synthesis</a> &raquo;</li>
        
      <li>C# Oscilator class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Synthesis/239-c-oscilator-class.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="c-oscilator-class">
<h1>C# Oscilator class<a class="headerlink" href="#c-oscilator-class" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><strong>Author or source:</strong> neotec</p></li>
<li><p><strong>Type:</strong> Sine, Saw, Variable Pulse, Triangle, C64 Noise</p></li>
<li><p><strong>Created:</strong> 2007-01-08 10:49:36</p></li>
</ul>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">notes</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Parameters:

Pitch: The Osc&#39;s pitch in Cents [0 - 14399] startig at A -&gt; 6.875Hz
Pulsewidth: [0 - 65535] -&gt; 0% to 99.99%
Value: The last Output value, a set to this property &#39;syncs&#39; the Oscilator
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">code</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-c++ notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">SynthOscilator</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">enum</span> <span class="n">OscWaveformType</span>
    <span class="p">{</span>
        <span class="n">SAW</span><span class="p">,</span> <span class="n">PULSE</span><span class="p">,</span> <span class="n">TRI</span><span class="p">,</span> <span class="n">NOISE</span><span class="p">,</span> <span class="n">SINE</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">Pitch</span>
    <span class="p">{</span>
        <span class="n">get</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_Pitch</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">set</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">_Pitch</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">MinMax</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="mi">14399</span><span class="p">);</span>
            <span class="k">this</span><span class="p">.</span><span class="n">OscStep</span> <span class="o">=</span> <span class="n">WaveSteps</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="n">_Pitch</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">PulseWidth</span>
    <span class="p">{</span>
        <span class="n">get</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_PulseWidth</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">set</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">_PulseWidth</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">MinMax</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="mi">65535</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">OscWaveformType</span> <span class="n">Waveform</span>
    <span class="p">{</span>
        <span class="n">get</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_WaveForm</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">set</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">_WaveForm</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">Value</span>
    <span class="p">{</span>
        <span class="n">get</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_Value</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">set</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">_Value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="n">OscNow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">int</span> <span class="n">_Pitch</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">_PulseWidth</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">_Value</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">OscWaveformType</span> <span class="n">_WaveForm</span><span class="p">;</span>

    <span class="k">private</span> <span class="kt">int</span> <span class="n">OscNow</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">OscStep</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">ShiftRegister</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">const</span> <span class="kt">double</span> <span class="n">BaseFrequence</span> <span class="o">=</span> <span class="mf">6.875</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">SampleRate</span> <span class="o">=</span> <span class="mi">44100</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">WaveSteps</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">public</span> <span class="k">static</span> <span class="kt">int</span><span class="p">[]</span> <span class="n">SineTable</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">public</span> <span class="nf">SynthOscilator</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">WaveSteps</span><span class="p">.</span><span class="n">Length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">this</span><span class="p">.</span><span class="n">CalcSteps</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">SineTable</span><span class="p">.</span><span class="n">Length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">this</span><span class="p">.</span><span class="n">CalcSine</span><span class="p">();</span>

        <span class="k">this</span><span class="p">.</span><span class="n">_Pitch</span> <span class="o">=</span> <span class="mi">7200</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">_PulseWidth</span> <span class="o">=</span> <span class="mi">32768</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">_WaveForm</span> <span class="o">=</span> <span class="n">OscWaveformType</span><span class="p">.</span><span class="n">SAW</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">=</span> <span class="mh">0x7ffff8</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">OscNow</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">OscStep</span> <span class="o">=</span> <span class="n">WaveSteps</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="n">_Pitch</span><span class="p">];</span>
        <span class="k">this</span><span class="p">.</span><span class="n">_Value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">void</span> <span class="nf">CalcSteps</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">WaveSteps</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">14400</span><span class="p">];</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">14400</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">double</span> <span class="n">t0</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">;</span>

            <span class="n">t0</span> <span class="o">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Pow</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="n">i</span> <span class="o">/</span> <span class="mf">1200.0</span><span class="p">);</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="n">BaseFrequence</span> <span class="o">*</span> <span class="n">t0</span><span class="p">;</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">t1</span> <span class="o">*</span> <span class="mf">65536.0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="kt">double</span><span class="p">)</span><span class="k">this</span><span class="p">.</span><span class="n">SampleRate</span><span class="p">;</span>

            <span class="n">WaveSteps</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Round</span><span class="p">(</span><span class="n">t2</span> <span class="o">*</span> <span class="mf">4096.0</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">void</span> <span class="nf">CalcSine</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">SineTable</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">65536</span><span class="p">];</span>

        <span class="kt">double</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">PI</span> <span class="o">/</span> <span class="mf">32768.0</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">65536</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">double</span> <span class="n">v</span> <span class="o">=</span> <span class="n">Math</span><span class="p">.</span><span class="n">Sin</span><span class="p">((</span><span class="kt">double</span><span class="p">)</span><span class="n">i</span> <span class="o">*</span> <span class="n">s</span><span class="p">)</span> <span class="o">*</span> <span class="mf">32768.0</span><span class="p">;</span>

            <span class="kt">int</span> <span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">Math</span><span class="p">.</span><span class="n">Round</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32768</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">&gt;</span> <span class="mi">65535</span><span class="p">)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="mi">65535</span><span class="p">;</span>

            <span class="n">SineTable</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">Run</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">32768</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">osc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">OscNow</span> <span class="o">&gt;&gt;</span> <span class="mi">12</span><span class="p">;</span>

        <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">_WaveForm</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">case</span> <span class="n">OscWaveformType</span><span class="p">.</span><span class="nl">SAW</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">osc</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">OscWaveformType</span><span class="p">.</span><span class="nl">PULSE</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">osc</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="n">PulseWidth</span><span class="p">)</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="mi">65535</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">OscWaveformType</span><span class="p">.</span><span class="nl">TRI</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">osc</span> <span class="o">&lt;</span> <span class="mi">32768</span><span class="p">)</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="n">osc</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>
                <span class="k">else</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="mi">131071</span> <span class="o">-</span> <span class="p">(</span><span class="n">osc</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">);</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">OscWaveformType</span><span class="p">.</span><span class="nl">NOISE</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x400000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x100000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x010000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x002000</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x000800</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x000080</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x000010</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span>
                  <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;</span> <span class="mh">0x000004</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">);</span>
                <span class="n">ret</span> <span class="o">&lt;&lt;=</span> <span class="mi">4</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">OscWaveformType</span><span class="p">.</span><span class="nl">SINE</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">SynthTools</span><span class="p">.</span><span class="n">SineTable</span><span class="p">[</span><span class="n">osc</span><span class="p">];</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="n">OscNow</span> <span class="o">+=</span> <span class="k">this</span><span class="p">.</span><span class="n">OscStep</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">OscNow</span> <span class="o">&gt;</span> <span class="mh">0xfffffff</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">bit0</span> <span class="o">=</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&gt;&gt;</span> <span class="mi">22</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&gt;&gt;</span> <span class="mi">17</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mh">0x1</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">&amp;=</span> <span class="mh">0x7fffff</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="n">ShiftRegister</span> <span class="o">|=</span> <span class="n">bit0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">this</span><span class="p">.</span><span class="n">OscNow</span> <span class="o">&amp;=</span> <span class="mh">0xfffffff</span><span class="p">;</span>

        <span class="k">this</span><span class="p">.</span><span class="n">_Value</span> <span class="o">=</span> <span class="n">ret</span> <span class="o">-</span> <span class="mi">32768</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">_Value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="nf">MinMax</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">c</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">b</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">c</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="168-c-gaussian-noise-generation.html" class="btn btn-neutral float-right" title="C++ gaussian noise generation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="227-butterworth.html" class="btn btn-neutral float-left" title="Butterworth" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Too many to list

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>